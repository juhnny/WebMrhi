<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Arrow fuction (두꺼운) 화살표 함수</title>
    </head>
    <body>
        <script>
            //화살표 함수 - Java, Kotlin의 람다 표기법
            
            //기존 함수 사용 방법
            // 1. 선언적 함수
            function show(){
                document.write("show() <br>")
            }
            show()

            // 2. 익명함수를 변수에 저장해 사용
            let output = function(){
                document.write("output() <br>")
            }
            output()

            // 3. 위 익명함수를 줄여쓰는 방법이 화살표 함수
            let display = () => {
                document.write("display() <br>")
            }
            display()

            //파라미터가 있는 화살표 함수
            let display2 = (name) => {
                document.write('display2() ' + name + '<br>')
            }
            display2("Steve")

            //파라미터가 한개라면 ()을 생략 가능
            let display3 = name => {
                document.write('display3() ' + name + '<br>')
            }
            display3("Steve")

            //실행문이 한 줄이라면 중괄호 생략 가능
            let display4 = name => document.write('display4() ' + name + '<br>')
            display4("Steve")

            //파라미터가 한 개도 없다면 소괄호 필요. 생략 불가
            let display5 = () => document.write('display5() ' + '<br>')
            display5("Steve")

            //파라미터가 두 개 이상이어도 소괄호 필요. 생략 불가
            let display6 = (name, age) => document.write('display6() ' + name + age + '<br>')
            display6("Steve", 16)

        </script>
        <hr>

        <button id="btn">Button</button>
        <p id="p1">Result</p>

        <script>
            // 보통 화살표함수는 '이벤트 처리' 콜백함수로 많이 활용됨
            // 보통 이벤트 처리할 때는 요소에 id를 주고 찾아와서 onclick 속성을 주는 방식으로 사용
            // onclick을 요소 안에 인라인으로 처리하게 되면 함수명을 수정하게 됐을 때 html에서도 바꿔줘야 해서 불편
            document.getElementById("btn").onclick = function(){
                document.getElementById("p1").innerHTML = "Nice"
            }

            //이를 화살표 함수로 처리하면
            document.getElementById("btn").ondblclick = () => document.getElementById("p1").innerHTML = "Good"
        </script>
        <hr>

        <h3 id="hh1"></h3>
        <script>
            //배열의 요소에 접근할 때도 화살표함수가 유용
            //보통 배열의 요소에 접근하는 방법
            const hh1 = document.getElementById("hh1")
            let arr = [100, 200, 300]
            hh1.innerHTML += arr[0]
            hh1.innerHTML += arr[1]
            hh1.innerHTML += arr[2]

            //for문 사용
            hh1.innerHTML += "<br><br>"
            for(let i = 0; i < arr.length; i++){
                hh1.innerHTML += arr[i]+"/"
            }

            //in으로 인덱스 사용
            hh1.innerHTML += "<br><br>"
            for(i in arr){
                hh1.innerHTML += arr[i] + "*"
            }

            //ES5에서 등장한 배열 객체의 forEach(), map() 메소드
            //forEach() 메소드의 파라미터로 전달한 함수가 배열의 요소 개수만큼 반복적으로 호출됨
            //이 때 이 함수에는 세 개의 인자가 전달되게 돼있다.
            hh1.innerHTML += "<br><br>"
            arr.forEach(function(value, index, array){ //파라미터명은 내 맘대로. 차례를 지켜야 함
                hh1.innerHTML += value + "/" + index + "/" + array.length + "<br>"
            })

            //위 동작을 화살표 함수로 하면?
            hh1.innerHTML += "<br>"
            arr.forEach( (value, index, array) => hh1.innerHTML += value + "/" + index + "/" + array.length + "<br>" )

            // .map() - forEach()와 같지만 return이 있음
            // 매핑 - 하나의 값을 다른 값으로 대응시키는 것
            // 요소 개수만큼 반복하며 리턴값들로 같은 크기의 새로운 배열을 만들어내는 메소드
            hh1.innerHTML += "<br>"
            let returnArr = arr.map( value => {return value + 50 })
            hh1.innerHTML += returnArr

            //위 동작을 화살표 함수로 하면? 
            //화살표 함수에서 중괄호를 생략할 때는 return 키워드도 생략해야 함
            hh1.innerHTML += "<br><br>"
            let returnArr2 = arr.map( value => value + 1000 )
            hh1.innerHTML += returnArr2

        </script>
    </body>
</html>